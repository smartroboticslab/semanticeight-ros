#!/bin/bash
# Launch some ROS executable and use the MAV as the ROS master.
ros_bash_file=$(printf '%s\n' /opt/ros/*/setup.bash | cut -f 1 -d ' ')
source "$ros_bash_file"
own_ipv4=$(ip -4 -oneline -brief address show | awk '/^(wlp|wlan).*UP/ { print $3 }' | sed -E 's|/[0-9]+$||')
export ROS_MASTER_URI='http://192.168.1.120:11311/' # WiFi
#export ROS_MASTER_URI='http://192.168.1.204:11311/' # Ethernet
export ROS_IP="$own_ipv4"
case "$#" in
	0)
		printf 'Usage: %s EXECUTABLE [ARGUMENT...]\n' "${0##*/}"
		exit 2
		;;
	*)
		package="$1"
		executable="$1"
		shift
		rosrun "$package" "$executable" "$@"
		;;
esac

