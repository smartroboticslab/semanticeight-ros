#!/bin/bash
ros_bash_file=$(printf '%s\n' /opt/ros/*/setup.bash | cut -f 1 -d ' ')
source "$ros_bash_file"
own_ipv4=$(ip -4 -oneline -brief address show | awk '/^(wlp|wlan).*UP/ { print $3 }' | sed -E 's|/[0-9]+$||')
export ROS_MASTER_URI='http://192.168.1.120:11311/' # WiFi
#export ROS_MASTER_URI='http://192.168.1.204:11311/' # Ethernet
export ROS_IP="$own_ipv4"
case "$#" in
	1)
		rosrun "$1" "$1"
		;;
	2)
		rosrun "$1" "$2"
		;;
	*)
		printf 'Usage: %s [PACKAGE] EXECUTABLE\n' "${0##*/}"
		printf 'PACKAGE defaults to EXECUTABLE if not supplied.\n'
		exit 2
		;;
esac

